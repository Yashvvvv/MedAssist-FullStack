# ==========================================
# MedAssist Backend - Production Configuration
# ==========================================
# This file contains production-specific settings.
# Sensitive values should be provided via environment variables.

# ==================== Server Configuration ====================
server.port=${PORT:8080}
spring.application.name=medassist-backend

# ==================== Database Configuration ====================
# REQUIRED: Set these via environment variables
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool (HikariCP)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.max-lifetime=1800000

# JPA/Hibernate - Production settings
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ==================== Security Configuration ====================
# REQUIRED: Set these via environment variables
medassist.jwt.secret=${JWT_SECRET}
medassist.jwt.expiration=${JWT_EXPIRATION:86400000}
medassist.jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION:604800000}

# CORS - Configure for your frontend domain(s)
cors.allowed-origins=${CORS_ALLOWED_ORIGINS}

# ==================== AI Service Configuration ====================
gemini.api.key=${GEMINI_API_KEY:}
gemini.api.model=${GEMINI_MODEL:gemini-1.5-flash}
gemini.api.timeout=30000

# ==================== Email Configuration ====================
spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME:}
spring.mail.password=${SPRING_MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.enabled=${MAIL_ENABLED:false}

# ==================== Google Maps Configuration ====================
google.maps.api.key=${GOOGLE_MAPS_API_KEY:}

# ==================== Actuator & Monitoring ====================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when_authorized
management.endpoint.health.probes.enabled=true
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true
management.prometheus.metrics.export.enabled=true
management.info.env.enabled=true
management.health.mail.enabled=false

# ==================== Logging Configuration ====================
logging.level.root=WARN
logging.level.com.medassist=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN

# JSON logging format for production (easier to parse in log aggregators)
logging.pattern.console={"timestamp":"%d{yyyy-MM-dd'T'HH:mm:ss.SSSXXX}","level":"%level","logger":"%logger{36}","message":"%msg"}%n

# ==================== Cache Configuration ====================
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=1h

# ==================== File Upload ====================
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ==================== Application Info ====================
medassist.app.name=MedAssist Backend
medassist.app.version=1.0.0
medassist.app.base-url=${APP_BASE_URL:https://api.medassist.com}
